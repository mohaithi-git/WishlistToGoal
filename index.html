<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Goal Carousel ‚Äì Bank Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --primary:#0b5ed7;
  --accent:#00b4d8;
  --bg:#f4f7ff;
  --card:#ffffff;
  --text:#1f2937;
}

body{
  font-family:"Segoe UI",system-ui,sans-serif;
  background:linear-gradient(135deg,#eef2ff,#f8fbff);
  margin:0;
  padding:24px;
  color:var(--text);
}

.header{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:#fff;
  padding:22px;
  border-radius:18px;
  margin-bottom:40px;
  text-align:center;
}

.dashboard{
  display:flex;
  gap:20px;
  flex-wrap:wrap;
  justify-content:center;
}

.wishlist-list{
  background:rgba(255,255,255,0.9);
  color:#000;
  border-radius:8px;
  padding:12px;
  font-size:14px;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  flex-shrink:0;
  max-width:180px;
  height:max-content;
}

.wishlist-list div{
  padding:6px 8px;
  cursor:pointer;
  border-radius:6px;
  transition:background 0.3s,color 0.3s;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.wishlist-list div:hover{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:#fff;
}

.wishlist-list div.active{
  background:linear-gradient(135deg,var(--accent),var(--primary));
  color:#fff;
}

.wishlist-list div span{
  font-size:16px;
  margin-left:6px;
}

.carousel-section{
  background:var(--card);
  border-radius:20px;
  padding:28px;
  box-shadow:0 14px 40px rgba(0,0,0,.12);
  max-width:700px;
  flex:1;
  min-width:280px;
  opacity:0;
  transform:translateY(40px);
  transition:1s;
}

.carousel-section.visible{
  opacity:1;
  transform:translateY(0);
}

.carousel{
  overflow:hidden;
  position:relative;
  height:260px;
}

.carousel-track{
  position:relative;
  width:100%;
  height:100%;
}

.slide{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  opacity:0;
  transition:opacity 1s ease;
}

.slide.active{
  opacity:1;
}

.slide-content{
  text-align:center;
  font-size:16px;
  line-height:1.5;
}

.slide-content ul{
  list-style:none;
  padding:0;
  margin:12px 0 0 0;
}

.slide-content li{
  opacity:0;
  transition:opacity 0.8s ease;
  margin:8px 0;
  cursor:pointer;
  padding:6px 8px;
  border-radius:6px;
  background:rgba(11,94,215,0.05);
  transition: all 0.3s ease;
}

.slide-content li:hover{
  background:rgba(11,94,215,0.2);
}

.dots{
  display:flex;
  justify-content:center;
  margin-top:16px;
}

.dot{
  width:12px;
  height:12px;
  background:#dbe4ff;
  border-radius:50%;
  margin:0 6px;
  overflow:hidden;
  cursor:pointer;
}

.dot span{
  display:block;
  height:100%;
  width:0%;
  background:linear-gradient(135deg,var(--primary),var(--accent));
}

@media(max-width:768px){
  .dashboard{
    flex-direction:column;
    align-items:center;
  }
  .wishlist-list{
    display:flex;
    max-width:100%;
    overflow-x:auto;
    white-space:nowrap;
    padding:8px;
    gap:8px;
  }
  .wishlist-list div{
    display:inline-flex;
    flex:none;
  }
  .carousel-section{
    width:100%;
  }
}
</style>
</head>
<body>

<div class="header">
  <h2>Smart Goal Planner</h2>
  <p>AI-guided insights grouped by wishlists</p>
</div>

<div class="dashboard">
  <div class="wishlist-list" id="wishlist-list"></div>
  <div class="carousel-section" id="wishlist-carousel">
    <div class="carousel">
      <div class="carousel-track"></div>
    </div>
    <div class="dots"></div>
  </div>
</div>

<script>
// ------------------- WISHLISTS -------------------
const wishlists=[
  {icon:"üè°",goal:"Dream Home",years:5,title:"Dream Home in 5 Years"},
  {icon:"üöó",goal:"Buy a Car",years:3,title:"Buy a Car in 3 Years"},
  {icon:"‚úàÔ∏è",goal:"World Travel",years:2,title:"World Travel in 2 Years"},
  {icon:"üìö",goal:"Education Fund",years:4,title:"Education Fund in 4 Years"},
  {icon:"üíç",goal:"Wedding Plan",years:2,title:"Wedding Plan in 2 Years"},
  {icon:"üèñÔ∏è",goal:"Retirement Travel",years:10,title:"Retirement Travel in 10 Years"}
];

const wishlistDuration=6000; 
const suggestionDuration=2000;

let index=0, carouselTimer=null, suggestionTimer=null;

const track=document.querySelector(".carousel-track");
const dotsContainer=document.querySelector(".dots");

// ------------------- AI SUGGESTIONS -------------------
function generateAI(goal,years){
  const openers=[
    "Your goal is closer than you think.",
    "Smart financial habits create freedom.",
    "Small steps today build big outcomes.",
    "Planning early multiplies confidence."
  ];
  const actions=[
    "automated savings",
    "goal-based investments",
    "disciplined monthly planning",
    "smart banking decisions"
  ];
  return openers.map(o=>`${o} With ${actions[Math.floor(Math.random()*actions.length)]}, your ${goal.toLowerCase()} can be achieved in ${years} years.`);
}

// ------------------- CREATE SLIDES -------------------
let slides=[], dots=[], wishlistDivs=[];

wishlists.forEach((w,i)=>{
  const suggestions=generateAI(w.goal,w.years);
  const slide=document.createElement("div");
  slide.className="slide";

  let content=`<div class="slide-content"><strong>${w.icon} ${w.title}</strong><ul>`;
  suggestions.forEach(s=>content+=`<li data-goal="${w.goal}" data-years="${w.years}">${s}</li>`);
  content+="</ul></div>";

  slide.innerHTML=content;
  track.appendChild(slide);
  slides.push(slide);

  // Dot
  const dot=document.createElement("div");
  dot.className="dot";
  dot.onclick=()=>goToSlide(slides.indexOf(slide));
  const span=document.createElement("span");
  dot.appendChild(span);
  dotsContainer.appendChild(dot);

  // Wishlist div with heart icon
  const div=document.createElement("div");
  div.innerHTML=`${w.icon} ${w.title} <span>‚ù§Ô∏è</span>`;
  div.onclick=()=>goToSlide(i);
  document.getElementById("wishlist-list").appendChild(div);
  wishlistDivs.push(div);
});

// ------------------- SHOW SUGGESTIONS -------------------
function showSuggestions(slide){
  clearInterval(suggestionTimer);
  const lis=slide.querySelectorAll("li");
  lis.forEach(li=>li.style.opacity=0);

  let si=0;
  suggestionTimer=setInterval(()=>{
    if(si<lis.length){
      lis[si].style.opacity=1;
      si++;
    } else clearInterval(suggestionTimer);
  }, suggestionDuration);
}

// ------------------- ACTIVATE SLIDE -------------------
function activateSlide(i){
  slides.forEach((s,j)=>s.classList.toggle("active", j===i));
  dots.forEach((d,j)=>d.style.width="0%");
  wishlistDivs.forEach((d,j)=>d.classList.toggle("active", j===i));
  animateDot(dots[i]);
  showSuggestions(slides[i]);
}

// ------------------- DOT ANIMATION -------------------
function animateDot(dot){
  let start=null;
  function run(ts){
    if(!start) start=ts;
    const pct=Math.min((ts-start)/wishlistDuration*100,100);
    dot.style.width=pct+"%";
    if(pct<100)requestAnimationFrame(run);
  }
  requestAnimationFrame(run);
}

// ------------------- NAVIGATION -------------------
function nextSlide(){
  index=(index+1)%slides.length;
  activateSlide(index);
}

function goToSlide(i){
  index=i;
  activateSlide(index);
  pause(); play();
}

function play(){ carouselTimer=setInterval(nextSlide, wishlistDuration);}
function pause(){ clearInterval(carouselTimer); clearInterval(suggestionTimer); }

// ------------------- PAUSE ON HOVER -------------------
document.querySelector(".carousel").addEventListener("mouseenter",pause);
document.querySelector(".carousel").addEventListener("mouseleave",play);

// ------------------- SWIPE SUPPORT -------------------
let startX=0;
document.querySelector(".carousel").addEventListener("touchstart",e=>startX=e.touches[0].clientX);
document.querySelector(".carousel").addEventListener("touchend",e=>{
  const diff=e.changedTouches[0].clientX-startX;
  if(Math.abs(diff)>50){
    if(diff<0) nextSlide();
    else index=(index-1+slides.length)%slides.length, activateSlide(index);
  }
});

// ------------------- SCROLL TRIGGER -------------------
const section=document.querySelector(".carousel-section");
const io=new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      section.classList.add("visible");
      activateSlide(index);
      play();
      io.unobserve(section);
    }
  });
},{threshold:.3});

io.observe(section);

// ------------------- REDIRECT ON CLICK -------------------
document.addEventListener("click",e=>{
  if(e.target.tagName==="LI" && e.target.dataset.goal){
    const goal=e.target.dataset.goal;
    const years=e.target.dataset.years;
    // redirect to goal creation page with prefilled params
    const url=`goal_creation.html?goal=${encodeURIComponent(goal)}&years=${encodeURIComponent(years)}`;
    window.location.href=url;
  }
});
</script>
</body>
</html>
